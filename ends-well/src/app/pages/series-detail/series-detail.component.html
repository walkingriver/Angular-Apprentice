<div class="series-detail-container">
  @if (loading()) {
    <div class="loading-container">
      <mat-spinner diameter="50"></mat-spinner>
      <p>Loading series details...</p>
    </div>
  } @else if (error()) {
    <div class="error-container">
      <mat-icon>error_outline</mat-icon>
      <p>{{ error() }}</p>
      <button mat-raised-button color="primary" (click)="goBack()">
        Go Back
      </button>
    </div>
  } @else if (series()) {
    <!-- Hero Section with Backdrop -->
    <div class="series-backdrop" [style.backgroundImage]="'url(' + series()!.backdropPath + ')'">
      <div class="backdrop-overlay">
        <div class="hero-content">
          <div class="series-poster">
            <img [src]="series()!.posterPath" [alt]="series()!.title" class="poster-image" />
          </div>
          <div class="series-info">
            <h1 class="series-title">{{ series()!.title }}</h1>
            <p class="series-years">{{ releaseYear() }}</p>

            <div class="series-meta">
              <span class="rating">
                <mat-icon>star</mat-icon>
                {{ rating() }}
              </span>
              @if (series()!.seasons) {
                <span class="seasons">{{ series()!.seasons }} Seasons</span>
              }
              @if (series()!.episodes) {
                <span class="episodes">{{ series()!.episodes }} Episodes</span>
              }
              @if (series()!.network) {
                <span class="network">{{ series()!.network }}</span>
              }
            </div>

            @if (series()!.genres?.length) {
              <div class="genres">
                @for (genre of series()!.genres; track genre) {
                  <span class="genre-chip">{{ genre }}</span>
                }
              </div>
            }

            <div class="overview">
              <p>{{ series()!.description }}</p>
            </div>

            @if (series()!.starring?.length) {
              <div class="starring">
                <strong>Starring:</strong> {{ series()!.starring?.join(', ') }}
              </div>
            }

            @if (series()!.createdBy?.length) {
              <div class="created-by">
                <strong>Created by:</strong> {{ series()!.createdBy?.join(', ') }}
              </div>
            }

            <div class="actions">
              <button
                mat-raised-button
                color="primary"
                class="watch-trailer"
                (click)="onWatchTrailer()"
              >
                <mat-icon>play_arrow</mat-icon>
                Watch Trailer
              </button>
              <button mat-icon-button (click)="onAddToFavorites()">
                <mat-icon>favorite_border</mat-icon>
              </button>
              <button mat-icon-button (click)="onAddToWatchlist()">
                <mat-icon>bookmark_border</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Back Button -->
    <div class="back-section">
      <button mat-button (click)="goBack()">
        <mat-icon>arrow_back</mat-icon>
        Back to Browse
      </button>
    </div>
  }
</div>
